<!--- Field.stories.mdx --->

import { useState } from 'react';
import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { ArgsTable } from '@storybook/addon-docs';
import Password from '@strapi/icons/Password';
import HelpIcon from '@strapi/icons/HelpIcon';
import { FieldLabel } from './FieldLabel';
import { FieldHint } from './FieldHint';
import { FieldError } from './FieldError';
import { FieldInput } from './FieldInput';
import { Field } from './Field';
import { Row } from '../Row';
import { Box } from '../Box';
import { Stack } from '../Stack';
import { Tooltip } from '../Tooltip';
import { FieldAction } from './FieldAction';

<Meta title="Design System/Molecules/Field" component={Field} />

# Field

Fields are inputs that allow users to add or edit text. They support several text formats including numbers.

**Best practices**

- TextButton should be above - always
- Icons are always on the right side within the input (writing area) itself, never on the left side.
- Labels are always left-aligned above the input and on the left side.
- Labels should be clear and concise. A few words only and without punctuation.
- Description line should always be below the input. Use it as a help to give more details about the required action.
- Within a form, unless users need a lot of space to write their content, the field should take 1 column space instead of two.
- Make sure to use the placeholder feature whenever clarification are helpful on how to use the field.
- Make sure to use to define the field as required whenever it is absolutely mandatory.
- If a single line is not enough for the amount of text required, use TextArea component.
- The error message will replace the description line. The two of them cannot be on top of each other.
- The error message can be customized, make sure to write actionable information within it to help resolve an issue.


## Usage

Fields are mostly found in forms and modals. They give users the possibility to add or edit text. In addition of plain text, Fields can also include a placeholder and a description line. 

The Field component is a base to all the different writing inputs: DatePicker, TimePicker, TextInput, Select, ...


### Base

The simplest representation of the Field components, no description, no error, no noise.

<Canvas>
  <Story name="base">
    <Field name="email">
      <Stack size={1}>
        <FieldLabel>Email</FieldLabel>
        <FieldInput type="text" placeholder="Placeholder" value={''} onChange={() => {}} />
      </Stack>
    </Field>
  </Story>
</Canvas>

### With description

A Field with a description allows to add a small hint of advanced information. 

<Canvas>
  <Story name="with description">
    <Field name="email" hint="Description line">
      <Stack size={1}>
        <FieldLabel>Email</FieldLabel>
        <FieldInput type="text" placeholder="Placeholder" value={''} onChange={() => {}} />
        <FieldHint />
      </Stack>
    </Field>
  </Story>
</Canvas>

### With error

An example of the Field components with an error.

<Canvas>
  <Story name="with error">
    <Field name="password" error={'Password is too short'}>
      <Stack size={1}>
        <FieldLabel>Password</FieldLabel>
        <FieldInput type="password" placeholder="Placeholder" value={''} onChange={() => {}} />
        <FieldHint />
        <FieldError />
      </Stack>
    </Field>
  </Story>
</Canvas>

### Disabled field

Depending on the permissions a user have or the status of an action, a Field can be unreachable or unavailable yet.

<Canvas>
  <Story name="disabled">
    <Field name="password" hint="Description line">
      <Stack size={1}>
        <FieldLabel>Password</FieldLabel>
        <FieldInput placeholder="Placeholder" value={'Hello world'} disabled={true} onChange={() => {}} />
        <FieldHint />
        <FieldError />
      </Stack>
    </Field>
  </Story>
</Canvas>

### Password with description and error

Password fields are specific. They offer the possibility to have unreadable content. By clicking on the eye icon on the right side, it is possible to actually read the password.



### Most complex input

This is the most complex input that can be built with the Field components.

<Canvas>
  <Story name="most complex input">
    {() => {
      const [email, setEmail] = useState('');
      return (
        <Box padding={8}>
          <Field name="password" hint="Description line" error={email.length > 5 ? 'Email is too short' : undefined}>
            <Stack size={1}>
              <Row>
                <FieldLabel>Password</FieldLabel>
                <Box paddingLeft={2}>
                  <Tooltip description="Content of the tooltip">
                    <button
                      aria-label="Information about the email"
                      style={{ border: 'none', padding: 0, background: 'transparent' }}
                    >
                      <HelpIcon aria-hidden={true} />
                    </button>
                  </Tooltip>
                </Box>
                <a href="#" style={{ marginLeft: 'auto' }}>
                  Details
                </a>
              </Row>
              <FieldInput
                placeholder="example@domain.com"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                startAction={
                  <FieldAction label="Show password">
                    <Password />
                  </FieldAction>
                }
                endAction={
                  <FieldAction label="Show password">
                    <Password />
                  </FieldAction>
                }
              />
              <FieldHint />
              <FieldError />
            </Stack>
          </Field>
        </Box>
      );
    }}
  </Story>
</Canvas>

## Props

<ArgsTable of={Field} />
