<!--- Popover.stories.mdx --->

import { useRef, useState } from 'react';
import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import { Popover } from './Popover';
import { Box } from '../Box';
import { Row } from '../Row';
import { Button } from '../Button';
import { Stack } from '../Stack';

<Meta title="Design System/Molecules/Popover" component={Popover} />

# Popover

This is the doc of the `Popover` component

[View source](https://github.com/strapi/parts/tree/develop/packages/strapi-parts/src/Popover)

## Imports

```js
import { Popover } from '@strapi/parts/Popover';
import { Box } from '@strapi/parts/Box';
```

## Usage

Description...

<Canvas>
  <Story name="centered">
    {() => {
      const [visible, setVisible] = useState(false);
      const buttonRef = useRef();
      return (
        <div style={{ marginLeft: '200px' }}>
          <button ref={buttonRef} onClick={() => setVisible((s) => !s)}>
            Open popover
          </button>
          {visible && (
            <Popover centered source={buttonRef} spacingTop={4}>
              <ul style={{ width: '200px' }}>
                {Array(15)
                  .fill(null)
                  .map((_, index) => (
                    <Box key={index} padding={3} as="li">
                      Element {index}
                    </Box>
                  ))}
              </ul>
            </Popover>
          )}
        </div>
      );
    }}
  </Story>
</Canvas>

## Popover

Description...

<Canvas>
  <Story name="base">
    {() => {
      const [visible, setVisible] = useState(false);
      const buttonRef = useRef();
      return (
        <Box padding={10}>
          <button ref={buttonRef} onClick={() => setVisible((s) => !s)}>
            Open popover
          </button>
          {visible && (
            <Popover source={buttonRef} spacingTop={4}>
              <ul style={{ width: '200px' }}>
                {Array(15)
                  .fill(null)
                  .map((_, index) => (
                    <Box key={index} padding={3} as="li">
                      Element {index}
                    </Box>
                  ))}
              </ul>
            </Popover>
          )}
        </Box>
      );
    }}
  </Story>
</Canvas>

## onReachEnd

Description...

<Canvas>
  <Story name="onReachEnd">
    {() => {
      const [items, setItems] = useState(Array(10).fill(null));
      const buttonRef = useRef();
      return (
        <Box padding={10}>
          <button ref={buttonRef} onClick={() => setVisible((s) => !s)}>
            Open popover
          </button>
          <Popover
            source={buttonRef}
            spacingTop={4}
            id="on-reach-end"
            intersectionId="test-123"
            onReachEnd={() => setItems(Array(15).fill(null))}
          >
            <ul style={{ width: '200px' }} id="list" tabIndex={-1}>
              {items.map((_, index) => (
                <Box key={index} padding={3} as="li" id={`item-${index}`}>
                  Element {index}
                </Box>
              ))}
            </ul>
          </Popover>
        </Box>
      );
    }}
  </Story>
</Canvas>

## Popover

Description...

<Canvas>
  <Story name="overflow-right">
    {() => {
      const [visible, setVisible] = useState(false);
      const buttonRef = useRef();
      return (
        <Row justifyContent="flex-end">
          <div>
            <button ref={buttonRef} onClick={() => setVisible((s) => !s)}>
              Open popover
            </button>
            {visible && (
              <Popover centered source={buttonRef} spacingTop={4}>
                <ul style={{ width: '200px' }}>
                  {Array(15)
                    .fill(null)
                    .map((_, index) => (
                      <Box key={index} padding={3} as="li">
                        Element {index}
                      </Box>
                    ))}
                </ul>
              </Popover>
            )}
          </div>
        </Row>
      );
    }}
  </Story>
</Canvas>
