import { useState, useEffect } from 'react';
import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs';

import { DateTimePicker, Flex, Button } from '@strapi/design-system';

<Meta title="Design System/Components/DateTimePicker" component={DateTimePicker} />

# DateTimePicker

Date time pickers are a fieldset containing the DatePicker and the TimePicker. Because they're primarily controlled by a date value,
the time picker cannot be "empty" whilst a date is selected, instead it's default is `00:00`. This is similar to how you can't select
a time without a date (which defaults to today). If you don't want either of them, look at using their respective components instead.

[View source](https://github.com/strapi/design-system/tree/main/packages/strapi-design-system/src/DateTimePicker)

## Usage

```js
import { DateTimePicker } from '@strapi/design-system/DateTimePicker';
```

### Basic Usage

<Canvas>
  <Story name="base">
    {() => {
      const [error, toggleError] = useState();
      const [disabled, toggleDisabled] = useState();
      return (
        <Flex direction="column" alignItems="stretch" gap={11}>
          <DateTimePicker label="Publish at" locale="en-GB" error={error} disabled={disabled} />
          <Flex gap={2} justifyContent="center">
            <Button
              variant="danger-light"
              onClick={() => toggleError((s) => (s ? undefined : "That's not a birthday!"))}
            >
              {`${error ? 'Hide' : 'Show'} the error state`}
            </Button>
            <Button variant="tertiary" onClick={() => toggleDisabled((s) => !s)}>
              {`${disabled ? 'Hide' : 'Show'} the disabled state`}
            </Button>
          </Flex>
        </Flex>
      );
    }}
  </Story>
</Canvas>

### Controlled

The DateTimePicker can be a controlled component by passing a `value` prop and an `onChange` callback, this also
enables you to have the ability to "clear" the inputs.

<Canvas>
  <Story name="controlled">
    {() => {
      const [value, setValue] = useState();
      return (
        <DateTimePicker
          label="Publish at"
          locale="en-GB"
          value={value}
          onChange={setValue}
          onClear={() => setValue(undefined)}
        />
      );
    }}
  </Story>
</Canvas>

## Initial data

Most times it's preferrable to set the initial date/time for this component. Similar to the `DatePicker` this component expects a `Date` value.

<Canvas>
  <Story name="initial data">
    {() => {
      return <DateTimePicker label="Publish at" initialDate={new Date('1994-12-18T15:00:00.000Z')} />;
    }}
  </Story>
</Canvas>

## Props

<ArgsTable of={DateTimePicker} />
